function Bot(t){this.properties={avatar:"dist/images/robot.png",message:"Olá! Posso ajudar?",botName:"Jamal"},$.extend(this.properties,t),this.events=function(){var t=$("#"+this.properties.botId);t.on("click",".ev-open-chat",this.chatShow),t.on("click",".ev-close-chat",this.chatHide),t.on("keyup",".ev-add-message",this.setMessage)},this.start=function(){this.templateFloat='<div class="ecb-float-container ev-open-chat"><div class="ecb-float-message">'+this.properties.message+'</div><img src="'+this.properties.avatar+'" class="ecb-float-icon"/></div>',this.templateChat='<div class="ecb-chat"><div class="ecb-chat-header"><div class="ecb-chat-header-title">'+this.properties.botName+'</div><div class="ecb-chat-header-close ev-close-chat"><svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div></div><div class="ecb-chat-body"></div><div class="ecb-chat-footer"><input type="text" placeholder="Digite aqui..." class="ev-add-message"/></div></div>',this.properties.botId="ecb-"+Date.now(),this.selector="#"+this.properties.botId,$("body").append('<div id="'+this.properties.botId+'" class="ecb">'+this.templateFloat+this.templateChat+"</div>"),this.events(),setTimeout(function(){this.floatShow()}.bind(this),300)},this.floatShow=function(){$("#"+this.properties.botId).find(".ecb-float-container").css("transform","scale(1)")},this.floatHide=function(){$("#"+this.properties.botId).find(".ecb-float-container").css("transform","scale(0)")},this.chatShow=function(){var t=$("#"+this.properties.botId);this.floatHide(),t.find(".ecb-chat").css("transform","scale(1)"),t.find(".ecb-chat-footer input").focus()}.bind(this),this.chatHide=function(){this.floatShow(),$("#"+this.properties.botId).find(".ecb-chat").css("transform","scale(0)")}.bind(this),this.setMessage=function(e){var s=$("#"+this.properties.botId);if(s.trigger("bot:writing",{bot:this,message:$(e.currentTarget).val()}),13==e.keyCode&&e.currentTarget.value.length){var i=$(e.currentTarget).val();t={message:i,human:!0,timestamp:Date.now(),typeMessage:"text"},this.add(t),s.trigger("bot:send",{bot:this,dialog:t,lastMessage:this.lastMessage}),this.lastMessage=t,$(e.currentTarget).val("")}}.bind(this),this.add=function(t){"undefined"==typeof t.messageType||"text"==t.messageType?t.template=this.templateMessageText:"option"==t.messageType&&(t.template=this.templateMessageText);var e=$("#"+this.properties.botId).find(".ecb-chat-body");e.append(this.template(t)),e[0].scrollTop=e[0].scrollHeight},this.template=function(t){var e=this.properties.avatar,s="";t.human&&(s="ecb-ts--right",e="");var i='<div class="ecb-ts '+s+'"><img src="'+e+'" class="ecb-ts-avatar"/>'+t.template(t)+"</div>";return i}.bind(this),this.templateMessageText=function(t){return'<div class="ecb-ts-bubble">'+t.message+"</div>"},this.templateMessageOptions=function(t){var e='<div class="ecb-ts-bubble ecb-ts-bubble-options"><div class="ecb-ts-message">'+t.message+'</div><div class="ecb-ts-buttons"><button class="ecb-button ecb-button-white">Sim</button><button class="ecb-button ecb-button-white">Não</button></div></div>';return e},this.typing=function(){var t='<div class="ecb-ts ecb-ts-typing"><img src="" class="ecb-ts-avatar"/><div class="ecb-ts-bubble"><div class="ecb-typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div></div>';$("#"+this.properties.botId).find(".ecb-chat-body").append(t),$("#"+this.properties.botId).find(".ev-add-message").prop("disabled",!0)}.bind(this),this.rmTyping=function(){$("#"+this.properties.botId).find(".ecb-chat-body .ecb-ts-typing").remove(),$("#"+this.properties.botId).find(".ev-add-message").prop("disabled",!1).focus()},this.start()}