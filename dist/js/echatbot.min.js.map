{"version":3,"sources":["echatbot.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"echatbot.min.js","sourcesContent":["function Bot(obj) {\n\n\tthis.properties = {\n\t\tavatar: 'dist/images/robot.png',\n\t\tmessage: 'Olá! Posso ajudar?',\n\t\tbotName: 'Jamal'\n\t};\n\n\t$.extend(this.properties, obj);\n\n\n\tthis.events = function() {\n\t\tvar selectorId = $('#'+this.properties.botId);\n\t\tselectorId.on('click', '.ev-open-chat', this.chatShow);\n\t\tselectorId.on('click', '.ev-close-chat', this.chatHide);\n\t\tselectorId.on('keyup', '.ev-add-message', this.setMessage);\n\t};\n\n\tthis.start = function() {\n\n\n\t\tthis.templateFloat =\n\t\t\t'<div class=\"ecb-float-container ev-open-chat\">'+\n\t\t\t\t'<div class=\"ecb-float-message\">'+\n\t\t\t\t\tthis.properties.message +\n\t\t\t\t'</div>'+\n\t\t\t\t'<img src=\"'+ this.properties.avatar +'\" class=\"ecb-float-icon\"/>'+\n\t\t\t'</div>';\n\n\t\tthis.templateChat =\n\t\t\t'<div class=\"ecb-chat\">'+\n\t\t\t\t'<div class=\"ecb-chat-header\">'+\n\t\t\t\t\t'<div class=\"ecb-chat-header-title\">'+ this.properties.botName +'</div>'+\n\t\t\t\t\t'<div class=\"ecb-chat-header-close ev-close-chat\">'+\n\t\t\t\t\t\t'<svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">'+\n\t\t\t\t\t\t\t'<path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path>'+\n\t\t\t\t\t\t\t'<path d=\"M0 0h24v24H0z\" fill=\"none\"></path>'+\n\t\t\t\t\t\t'</svg>'+\n\t\t\t\t\t'</div>'+\n\t\t\t\t'</div>'+\n\t\t\t\t'<div class=\"ecb-chat-body\">'+\n\t\t\t\t'</div>'+\n\t\t\t\t'<div class=\"ecb-chat-footer\">'+\n\t\t\t\t\t'<input type=\"text\" placeholder=\"Digite aqui...\" class=\"ev-add-message\"/>'+\n\t\t\t\t'</div>'+\n\t\t\t'</div>';\n\n\t\tthis.properties.botId = 'ecb-'+Date.now();\n\t\tthis.selector = '#'+this.properties.botId;\n\t\t$('body').append('<div id=\"'+ this.properties.botId +'\" class=\"ecb\">'+ this.templateFloat + this.templateChat + '</div>');\n\t\tthis.events();\n\n\t\tsetTimeout(function() {\n\t\t\tthis.floatShow();\n\t\t}.bind(this), 300);\n\t};\n\n\tthis.floatShow = function() {\n\t\t$('#'+this.properties.botId).find('.ecb-float-container').css('transform', 'scale(1)');\n\t};\n\n\tthis.floatHide = function() {\n\t\t$('#'+this.properties.botId).find('.ecb-float-container').css('transform', 'scale(0)');\n\t};\n\n\tthis.chatShow = function() {\n\t\tvar chatTarget = $('#'+this.properties.botId);\n\t\tthis.floatHide();\n\t\tchatTarget.find('.ecb-chat').css('transform', 'scale(1)');\n\t\tchatTarget.find('.ecb-chat-footer input').focus();\n\t}.bind(this);\n\n\tthis.chatHide = function() {\n\t\tthis.floatShow();\n\t\t$('#'+this.properties.botId).find('.ecb-chat').css('transform', 'scale(0)');\n\t}.bind(this);\n\n\tthis.setMessage = function(e) {\n\t\tvar chat = $('#'+this.properties.botId);\n\t\tchat.trigger('bot:writing', { bot: this, message: $(e.currentTarget).val() });\n\t\tif(e.keyCode == 13 && e.currentTarget.value.length) {\n\t\t\tvar message = $(e.currentTarget).val();\n\t\t\tobj = {\n\t\t\t\t'message': message,\n\t\t\t\t'human': true,\n\t\t\t\t'timestamp': Date.now(),\n\t\t\t\t'typeMessage': 'text'\n\t\t\t};\n\n\t\t\tthis.add(obj);\n\n\t\t\tchat.trigger('bot:send', {\n\t\t\t\tbot:this,\n\t\t\t\tdialog: obj,\n\t\t\t\tlastMessage: this.lastMessage\n\t\t\t});\n\n\t\t\tthis.lastMessage = obj;\n\t\t\t$(e.currentTarget).val('');\n\t\t}\n\t}.bind(this);\n\n\t//Adiciona mensagem no corpo do chat\n\tthis.add = function(obj) {\n\t\tif(typeof obj.messageType == 'undefined' || obj.messageType == 'text') {\n\t\t\tobj.template = this.templateMessageText;\n\t\t}\n\t\telse if(obj.messageType == 'option') {\n\t\t\tobj.template = this.templateMessageText;\n\t\t}\n\n\t\tvar body = $('#'+this.properties.botId).find('.ecb-chat-body');\n\t\tbody.append(this.template(obj) );\n\t\tbody[0].scrollTop = body[0].scrollHeight;\n\t};\n\n\tthis.template = function(obj) {\n\t\tvar avatar = this.properties.avatar;\n\t\tvar position = '';\n\n\t\tif(obj.human) {\n\t\t\tposition = 'ecb-ts--right';\n\t\t\tavatar = '';\n\t\t}\n\n\t\tvar html =\n\t\t\t'<div class=\"ecb-ts '+ position +'\">'+\n\t\t\t\t'<img src=\"'+ avatar +'\" class=\"ecb-ts-avatar\"/>'+\n\t\t\t\tobj.template(obj) +\n\t\t\t'</div>';\n\n\t\treturn html;\n\t}.bind(this);\n\n\tthis.templateMessageText = function(obj) {\n\t\treturn '<div class=\"ecb-ts-bubble\">'+ obj.message +'</div>';\n\t};\n\n\tthis.templateMessageOptions = function(obj) {\n\t\tvar html =\n\t\t\t'<div class=\"ecb-ts-bubble ecb-ts-bubble-options\">'+\n\t\t\t\t'<div class=\"ecb-ts-message\">'+ obj.message + '</div>'+\n\t\t\t\t'<div class=\"ecb-ts-buttons\">'+\n\t\t\t\t\t'<button class=\"ecb-button ecb-button-white\">Sim</button>'+\n\t\t\t\t\t'<button class=\"ecb-button ecb-button-white\">Não</button>'+\n\t\t\t\t'</div>'+\n\t\t\t'</div>';\n\t\treturn html;\n\t};\n\n\tthis.typing = function() {\n\t\tvar html =\n\t\t'<div class=\"ecb-ts ecb-ts-typing\">'+\n\t\t\t'<img src=\"\" class=\"ecb-ts-avatar\"/>'+\n\t\t\t'<div class=\"ecb-ts-bubble\">'+\n\t\t\t\t'<div class=\"ecb-typing\">'+\n\t\t\t\t\t'<div class=\"dot\"></div>'+\n\t\t\t\t\t'<div class=\"dot\"></div>'+\n\t\t\t\t\t'<div class=\"dot\"></div>'+\n\t\t\t\t'</div>'+\n\t\t\t'</div>'+\n\t\t'</div>';\n\n\t\t$('#'+this.properties.botId).find('.ecb-chat-body').append(html);\n\t\t$('#'+this.properties.botId).find('.ev-add-message').prop('disabled', true);\n\n\t}.bind(this);\n\n\tthis.rmTyping = function() {\n\t\t$('#'+this.properties.botId).find('.ecb-chat-body .ecb-ts-typing').remove();\n\t\t$('#'+this.properties.botId).find('.ev-add-message').prop('disabled', false).focus();\n\t};\n\n\tthis.start();\n}\n"]}